<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ZYM Node Configuration</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <style>
        :root { --bg: #000; --accent: #00f2ff; --card-bg: #0d0d0d; --text-dim: #a0a0a0; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: #e0e0e0; margin: 0; padding: 15px; padding-bottom: 100px; }
        
        .profile-card { background: linear-gradient(180deg, rgba(0, 242, 255, 0.05) 0%, rgba(0, 0, 0, 0) 100%); border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 30px; padding: 25px; text-align: center; margin-bottom: 20px; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px; }
        .stat-box { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 20px; padding: 15px; }
        
        .menu-item { background: var(--card-bg); border: 1px solid rgba(255, 255, 255, 0.05); border-radius: 18px; padding: 16px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; cursor: pointer; transition: 0.2s; }
        .menu-item:active { background: rgba(255,255,255,0.05); transform: scale(0.98); }
        
        .logout-btn { color: #ff4444; font-weight: 800; font-size: 12px; text-transform: uppercase; letter-spacing: 2px; margin-top: 20px; text-align: center; width: 100%; display: block; }

        /* Navigation Styles from Main Page */
        .nav-wrapper { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 94%; z-index: 1000; }
        .nav-container { background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(20px); border-radius: 35px; display: flex; justify-content: space-around; align-items: center; padding: 10px; border: 1px solid rgba(255,255,255,0.08); }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; font-size: 9px; font-weight: 800; text-transform: uppercase; text-decoration: none; gap: 4px; }
        .nav-item.active { color: var(--accent); }
        .nav-main-btn { position: relative; top: -25px; width: 68px; height: 68px; background: #000; border-radius: 22px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); border: 4px solid var(--bg); }
    </style>
</head>
<body>

    <header class="flex justify-between items-center mb-6 px-2">
        <h1 class="text-xl font-black tracking-tighter">NODE CONFIG</h1>
        <div class="px-3 py-1 bg-cyan-500/10 border border-cyan-500/30 rounded-full">
            <span class="text-[10px] font-black text-cyan-400 uppercase tracking-widest">v2.0.4 Beta</span>
        </div>
    </header>

    <div class="profile-card">
        <div class="relative inline-block mb-4">
            <div class="w-20 h-20 bg-gradient-to-tr from-cyan-500 to-blue-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-lg shadow-cyan-500/20">
                <span id="initials">U</span>
            </div>
            <div class="absolute -bottom-2 -right-2 bg-black border-2 border-cyan-500 w-8 h-8 rounded-full flex items-center justify-center">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#00f2ff" stroke-width="3"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            </div>
        </div>
        <h2 id="user-name" class="text-xl font-black text-white">USER_NODE</h2>
        <p id="user-id" class="text-[10px] font-bold text-gray-500 tracking-[3px] mt-1 uppercase">ID: 00000000</p>
    </div>

    <div class="stat-grid">
        <div class="stat-box">
            <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1">Total Assets</p>
            <div class="flex items-baseline gap-1">
                <span id="cfg-balance" class="text-lg font-black text-white">0</span>
                <span class="text-[8px] font-black text-cyan-400">ZYM</span>
            </div>
        </div>
        <div class="stat-box">
            <p class="text-[9px] font-black text-gray-500 uppercase tracking-widest mb-1">Mining Power</p>
            <div class="flex items-baseline gap-1">
                <span id="cfg-power" class="text-lg font-black text-white">10K</span>
                <span class="text-[8px] font-black text-cyan-400">/8H</span>
            </div>
        </div>
    </div>

    <div class="space-y-3">
        <div class="menu-item">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                </div>
                <div>
                    <p class="text-[11px] font-black text-white">Node Identity</p>
                    <p class="text-[9px] text-gray-500 font-bold uppercase">KYC & Verification</p>
                </div>
            </div>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="3"><path d="M9 18l6-6-6-6"/></svg>
        </div>

        <div class="menu-item" onclick="window.open('https://t.me/your_channel')">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"/></svg>
                </div>
                <div>
                    <p class="text-[11px] font-black text-white">Community Chat</p>
                    <p class="text-[9px] text-gray-500 font-bold uppercase">Join Telegram</p>
                </div>
            </div>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="3"><path d="M9 18l6-6-6-6"/></svg>
        </div>

        <div class="menu-item">
            <div class="flex items-center gap-4">
                <div class="w-10 h-10 bg-white/5 rounded-xl flex items-center justify-center">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                </div>
                <div>
                    <p class="text-[11px] font-black text-white">Network Status</p>
                    <p class="text-[9px] text-green-500 font-bold uppercase">Operational</p>
                </div>
            </div>
            <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
        </div>
    </div>

    <button onclick="handleLogout()" class="logout-btn">Terminate Session</button>

    <!-- Navigation (Same as index.html) -->
    <div class="nav-wrapper">
        <nav class="nav-container">
            <a href="holding.html" class="nav-item"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M20 7H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2zM16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg><span>Assets</span></a>
            <a href="objective.html" class="nav-item"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7"/></svg><span>Tasks</span></a>
            <a href="index.html" class="nav-main-btn">
                <svg viewBox="0 0 100 100" class="w-11 h-11">
                    <path d="M50 5 L92 28 L92 72 L50 95 L8 72 L8 28 Z" fill="none" stroke="#d1d5db" stroke-width="7"/>
                    <path d="M55 15 L40 48 L52 48 L45 85 L70 42 L52 42 L62 15 Z" fill="#00f2ff" />
                </svg>
            </a>
            <a href="kinship.html" class="nav-item"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/></svg><span>Network</span></a>
            <a href="config.html" class="nav-item active"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0"/><circle cx="12" cy="12" r="3"/></svg><span>Config</span></a>
        </nav>
    </div>

    <script>
        const ZYM_STORE = {
            get: (k) => { 
                const d = localStorage.getItem('zym_'+k); 
                if(!d) return null;
                try { return JSON.parse(decodeURIComponent(atob(d))); } catch(e) { return null; }
            },
            clear: () => {
                Object.keys(localStorage).forEach(k => {
                    if(k.startsWith('zym_')) localStorage.removeItem(k);
                });
            }
        };

        const tg = window.Telegram.WebApp;
        
        function initConfig() {
            tg.expand();
            tg.BackButton.show();
            tg.onEvent('backButtonClicked', () => window.location.href = 'index.html');

            const userData = tg.initDataUnsafe?.user;
            if (userData) {
                document.getElementById('user-name').innerText = userData.first_name.toUpperCase();
                document.getElementById('user-id').innerText = "ID: " + userData.id;
                document.getElementById('initials').innerText = userData.first_name.charAt(0);
            }

            const bal = ZYM_STORE.get('bal') || 0;
            const pwr = ZYM_STORE.get('mine_limit') || 10000;

            document.getElementById('cfg-balance').innerText = bal.toLocaleString();
            document.getElementById('cfg-power').innerText = (pwr / 1000) + "K";
        }

        function handleLogout() {
            if(confirm("Terminate current session and clear local cache?")) {
                ZYM_STORE.clear();
                tg.close();
            }
        }

        initConfig();
    </script>
</body>
</html>
