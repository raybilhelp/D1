<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ZYM Profile - Config</title>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        :root { 
            --bg: #000; 
            --accent: #00f2ff; 
            --card-bg: #0d0d0d;
            --text-main: #e0e0e0;
            --text-dim: #a0a0a0;
        }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text-main); 
            height: 100dvh; display: flex; flex-direction: column; 
            overflow: hidden; margin: 0; padding: 15px;
        }

        /* প্রোফাইল কার্ড - সাইজ অপ্টিমাইজড */
        .profile-card {
            background: linear-gradient(180deg, #0d0d0d 0%, #050505 100%);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 30px;
            padding: 20px 15px;
            text-align: center;
            margin-top: 5px;
        }

        .avatar-glow {
            width: 90px; height: 90px; border-radius: 50%;
            border: 3px solid var(--accent);
            box-shadow: 0 0 25px rgba(0, 242, 255, 0.2);
            margin: 0 auto 12px;
            overflow: hidden;
            background: #111;
            display: flex; align-items: center; justify-content: center;
            font-size: 32px; font-weight: 900; color: var(--accent);
        }

        /* স্ট্যাটাস বক্স - কম্প্যাক্ট ডিজাইন */
        .status-container {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* টোটাল ব্যালেন্স বক্স (Green Area Update) */
        .balance-box {
            background: rgba(0, 242, 255, 0.05);
            border: 1px solid rgba(0, 242, 255, 0.1);
            border-radius: 18px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* মাইনিং পাওয়ার বক্স - দৈর্ঘ্য কমানো হয়েছে (Red Area Update) */
        .power-box-small {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .label-text { font-size: 10px; font-weight: 800; color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px; }
        .value-text { font-size: 18px; font-weight: 900; color: #fff; }
        .unit-text { font-size: 10px; color: var(--accent); margin-left: 4px; }

        /* Wallet Button */
        .action-link {
            width: 100%; height: 60px; margin-top: 15px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px; text-decoration: none;
        }
        .icon-box {
            width: 36px; height: 36px; background: rgba(0, 242, 255, 0.1);
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            border: 1px solid rgba(0, 242, 255, 0.2);
        }

        /* Navigation */
        .nav-wrapper { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 94%; z-index: 1000; }
        .nav-container {
            background: rgba(10, 10, 10, 0.9); backdrop-filter: blur(20px); border-radius: 35px;
            display: flex; justify-content: space-around; align-items: center; padding: 10px;
            border: 1px solid rgba(255,255,255,0.08);
        }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #555; font-size: 9px; font-weight: 800; text-transform: uppercase; text-decoration: none; gap: 4px; }
        .nav-item.active { color: var(--accent); }
        .nav-main-btn {
            position: relative; top: -25px; width: 68px; height: 68px; background: #000;
            border-radius: 22px; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 30px rgba(0, 242, 255, 0.3); border: 4px solid var(--bg);
        }
    </style>
</head>
<body>

    <header class="mb-1">
        <h1 class="text-xl font-black text-white italic tracking-tighter uppercase">ZYM PRO</h1>
    </header>

    <main class="flex-grow overflow-y-auto pb-32">
        
        <div class="profile-card">
            <div id="user-avatar" class="avatar-glow">ZY</div>
            <h2 id="user-name" class="text-xl font-black text-white mb-0.5 uppercase">Demo User</h2>
            <p id="user-id" class="text-[9px] font-bold text-gray-500 tracking-[2px] uppercase mb-4">UID: 786776700</p>

            <div class="status-container">
                <!-- TOTAL BALANCE (Updated Green Area) -->
                <div class="balance-box">
                    <span class="label-text">Total Assets</span>
                    <div>
                        <span id="total-balance" class="value-text">0</span>
                        <span class="unit-text">ZYM</span>
                    </div>
                </div>

                <!-- MINING POWER (Updated Red Area - Compact) -->
                <div class="power-box-small">
                    <span class="label-text">Node Power</span>
                    <div>
                        <span id="mining-power" class="value-text">0</span>
                        <span class="unit-text">/ 8H</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wallet Button -->
        <a href="withdrawal.html" class="action-link">
            <div class="flex items-center gap-3">
                <div class="icon-box">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#00f2ff" stroke-width="2.2"><rect x="2" y="5" width="20" height="14" rx="2" ry="2"></rect><line x1="2" y1="10" x2="22" y2="10"></line></svg>
                </div>
                <span class="text-xs font-bold text-white uppercase tracking-wider">Wallet & Withdrawal</span>
            </div>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#444" stroke-width="3"><path d="M9 18l6-6-6-6"/></svg>
        </a>

    </main>

    <!-- Navigation Bar -->
    <div class="nav-wrapper">
        <nav class="nav-container">
            <a href="holding.html" class="nav-item">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M20 7H4a2 2 0 00-2 2v10a2 2 0 002 2h16a2 2 0 002-2V9a2 2 0 00-2-2zM16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16"/></svg>
                <span>Assets</span>
            </a>
            <a href="objective.html" class="nav-item">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>
                <span>Tasks</span>
            </a>
            
            <a href="index.html" class="nav-main-btn">
                <svg viewBox="0 0 100 100" class="w-11 h-11">
                    <path d="M50 5 L92 28 L92 72 L50 95 L8 72 L8 28 Z" fill="none" stroke="#d1d5db" stroke-width="7"/>
                    <path d="M25 40 H45 L30 65 H50" stroke="#fff" stroke-width="8" fill="none" stroke-linecap="round"/>
                    <path d="M55 65 V35 L70 50 L85 35 V65" stroke="#fff" stroke-width="8" fill="none" stroke-linecap="round"/>
                    <path d="M55 15 L40 48 L52 48 L45 85 L70 42 L52 42 L62 15 Z" fill="#00f2ff" />
                </svg>
            </a>

            <a href="kinship.html" class="nav-item">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 7a4 4 0 110-8 4 4 0 010 8zm10 14v-2a4 4 0 00-3-3.87m-4-12a4 4 0 010 7.75"/></svg>
                <span>Network</span>
            </a>
            <a href="config.html" class="nav-item active">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2"><path d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><circle cx="12" cy="12" r="3"/></svg>
                <span>Config</span>
            </a>
        </nav>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // লোকাল স্টোরেজ হেল্পার
        const ZYM_STORE = {
            get: (k) => { 
                const d = localStorage.getItem('zym_'+k); 
                if(!d) return null;
                try { return JSON.parse(decodeURIComponent(atob(d))); } catch(e) { return null; }
            }
        };

        function initProfile() {
            const user = tg.initDataUnsafe?.user;
            if (user) {
                document.getElementById('user-name').innerText = (user.first_name + ' ' + (user.last_name || '')).toUpperCase();
                document.getElementById('user-id').innerText = `UID: ${user.id}`;
                const avatar = document.getElementById('user-avatar');
                if (user.photo_url) {
                    avatar.innerHTML = `<img src="${user.photo_url}" class="w-full h-full object-cover">`;
                } else {
                    avatar.innerText = user.first_name.charAt(0) + (user.last_name ? user.last_name.charAt(0) : '');
                }
            }
            
            // ১. ব্যালেন্স লোড (zym_bal থেকে)
            const savedBal = ZYM_STORE.get('bal');
            if(savedBal !== null) {
                document.getElementById('total-balance').innerText = Number(savedBal).toLocaleString();
            }

            // ২. মাইনিং পাওয়ার লোড (zym_mine_limit থেকে)
            const savedPower = ZYM_STORE.get('mine_limit');
            if(savedPower) {
                document.getElementById('mining-power').innerText = Number(savedPower).toLocaleString();
            }
        }
        window.onload = initProfile;
    </script>
</body>
</html>
